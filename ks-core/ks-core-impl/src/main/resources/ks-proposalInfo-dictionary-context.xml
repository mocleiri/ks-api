<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">
	<import resource="classpath:ks-base-dictionary-context.xml" />

	<!-- Generic ProposalInfo-->
	<bean id="org.kuali.student.core.proposal.dto.ProposalInfo-parent"
		abstract="true" parent="objectStructureDefinition">
		<property name="name"
			value="org.kuali.student.core.proposal.dto.ProposalInfo" />
		<property name="attributes">
			<list>
				<ref bean="proposalInfo.detailDesc" />
				<ref bean="proposalInfo.effectiveDate" />
				<ref bean="proposalInfo.expirationDate" />
				<ref bean="proposalInfo.id" />
				<ref bean="proposalInfo.workflowId" />
				<ref bean="proposalInfo.workflowNode" />				
				<ref bean="proposalInfo.name" />
				<ref bean="proposalInfo.proposalReference" />
				<ref bean="proposalInfo.proposalReferenceType" />
				<ref bean="proposalInfo.proposerOrg" />
				<ref bean="proposalInfo.proposerPerson" />
				<ref bean="proposalInfo.rationale" />
				<ref bean="proposalInfo.state" />
				<ref bean="proposalInfo.type" />
				
				<ref bean="proposalInfo.prevStartTerm" />
				<ref bean="proposalInfo.prevEndTerm" />
				
			</list>
		</property>
		<property name="hasMetaData" value="true" />
	</bean>
	<bean id="org.kuali.student.core.proposal.dto.ProposalInfo"
		parent="org.kuali.student.core.proposal.dto.ProposalInfo-parent" />

	<!-- Proposal definition for Program Proposal. NOTE: There is no java class called ProgramProposalInfo -->
	<bean id="org.kuali.student.core.proposal.definition.ProgramProposalInfo"
		parent="org.kuali.student.core.proposal.dto.ProposalInfo" >
		<property name="name"
			value="org.kuali.student.core.proposal.definition.ProgramProposalInfo" />
		<property name="attributes">
			<list merge="true">
				<ref bean="programProposalInfo.abstract" />
			</list>
		</property>	
	</bean>

	<bean id="proposalInfo.detailDesc-parent" abstract="true"
		parent="baseKualiDescription">
		<property name="name" value="detailDesc" />
	</bean>
	<bean id="proposalInfo.detailDesc" parent="proposalInfo.detailDesc-parent" />

	<bean id="proposalInfo.effectiveDate-parent" abstract="true"
		parent="baseKualiEffectiveDate">
		<property name="name" value="effectiveDate" />
	</bean>
	<bean id="proposalInfo.effectiveDate" parent="proposalInfo.effectiveDate-parent" />

	<bean id="proposalInfo.expirationDate-parent" abstract="true"
		parent="baseKualiExpirationDate">
		<property name="name" value="expirationDate" />
	</bean>
	<bean id="proposalInfo.expirationDate" parent="proposalInfo.expirationDate-parent" />

	<bean id="proposalInfo.prevStartTerm-parent" abstract="true"
		parent="baseKualiType">
		<property name="name" value="prevStartTerm" />
		<property name="lookupDefinition" ref="constraint.lookup.atp"/>
		<property name="dynamic" value="true"/>
	</bean>
	<bean id="proposalInfo.prevStartTerm" parent="proposalInfo.prevStartTerm-parent" />

	<bean id="proposalInfo.prevEndTerm-parent" abstract="true"
		parent="baseKualiType">
		<property name="name" value="prevEndTerm" />
		<property name="lookupDefinition" ref="constraint.lookup.atp"/>
		<property name="dynamic" value="true"/>
	</bean>
	<bean id="proposalInfo.prevEndTerm" parent="proposalInfo.prevEndTerm-parent" />
    
    <bean id="constraint.lookup.atp"
          class="org.kuali.student.common.dictionary.dto.LookupConstraint"
          parent="kuali.common.lookup.atp">
        <property name="id" value="all atps"/>
    </bean>

	<bean id="proposalInfo.id-parent" abstract="true" parent="baseKualiId">
		<property name="name" value="id" />		
	</bean>
	<bean id="proposalInfo.id" parent="proposalInfo.id-parent" />

	<bean id="proposalInfo.workflowId-parent" abstract="true" parent="baseString">
		<property name="name" value="workflowId" />		
		<property name="dynamic" value="true"/>
	</bean>
	<bean id="proposalInfo.workflowId" parent="proposalInfo.workflowId-parent" />

	<bean id="proposalInfo.workflowNode-parent" abstract="true" parent="baseString">
		<property name="name" value="workflowNode" />		
		<property name="dynamic" value="true"/>
	</bean>
	<bean id="proposalInfo.workflowNode" parent="proposalInfo.workflowNode-parent" />

	<bean id="proposalInfo.name-parent" abstract="true" parent="baseKualiName">
		<property name="name" value="name" />
		<property name="minOccurs" value="1" />
		<property name="maxLength" value="150"/>
	</bean>
	<bean id="proposalInfo.name" parent="proposalInfo.name-parent" />

	<bean id="proposalInfo.proposalReference-parent" abstract="true"
		parent="baseKualiId">
		<property name="name" value="proposalReference" />
		<property name="maxOccurs" value="unbounded" />
	</bean>
	<bean id="proposalInfo.proposalReference" parent="proposalInfo.proposalReference-parent" />

	<bean id="proposalInfo.proposalReferenceType-parent" abstract="true"
		parent="baseKualiType">
		<property name="name" value="proposalReferenceType" />
	</bean>
	<bean id="proposalInfo.proposalReferenceType" parent="proposalInfo.proposalReferenceType-parent" />

	<bean id="proposalInfo.proposerOrg-parent" abstract="true"
		parent="baseKualiOrgId">
		<property name="name" value="proposerOrg" />
		<property name="maxOccurs" value="unbounded" />
	</bean>
	<bean id="proposalInfo.proposerOrg" parent="proposalInfo.proposerOrg-parent" />

	<bean id="proposalInfo.proposerPerson-parent" abstract="true"
		parent="baseKualiPersonId">
		<property name="name" value="proposerPerson" />
		<property name="maxOccurs" value="unbounded" />
	</bean>
	<bean id="proposalInfo.proposerPerson" parent="proposalInfo.proposerPerson-parent" />

	<bean id="proposalInfo.rationale-parent" abstract="true"
		parent="baseKualiDescription">
		<property name="name" value="rationale" />
		<property name="maxOccurs" value="1" />
		<property name="minOccurs" value="0" />
		<property name="maxLength" value="250"/>
  		<property name="caseConstraint">
	  	  <bean parent="caseConstraint">
	   		<property name="operator" value="EQUALS"/>
	   		<property name="fieldPath" value="state"/>
	   		<property name="caseSensitive" value="false"/>
	   		<property name="whenConstraint">
	    	  <list>
	     		<bean parent="whenConstraint">
	      		  <property name="values">
	       	        <list>
	                  <value>ENROUTE</value>
	                  <value>APPROVED</value>
	       		    </list>
	              </property>
	      		  <property name="constraint">
	                <bean parent="baseKualiDescription">
		              <property name="maxOccurs" value="1" />
		              <property name="minOccurs" value="1" />
		              <property name="maxLength" value="250"/>
        			</bean>
	      		  </property>
	     		</bean>
	    	  </list>
	   		</property>
	  	  </bean>
	   </property>
	</bean>
	<bean id="proposalInfo.rationale" parent="proposalInfo.rationale-parent" />

	<bean id="proposalInfo.state-parent" abstract="true"
		parent="baseKualiState">
		<property name="name" value="state" />
	</bean>
	<bean id="proposalInfo.state" parent="proposalInfo.state-parent" />

	<bean id="proposalInfo.type-parent" abstract="true"
		parent="baseKualiTypeRequired">
		<property name="name" value="type" />
	</bean>
	<bean id="proposalInfo.type" parent="proposalInfo.type-parent" />


	<bean id="programProposalInfo.abstract-parent" abstract="true" parent="baseKualiDescription">
		<property name="name" value="abstract" />		
		<property name="dynamic" value="true"/>
	</bean>
	<bean id="programProposalInfo.abstract" parent="programProposalInfo.abstract-parent" />

</beans>
